/*! release-manager 2019-11-27 */

var App=function(t){"use strict";return t.releaseManager=function(){return $(".auth-type-container").hide(),$("select").select2(),$("#git-source-auth").on("change",function(){$(".auth-type-container").hide(),$('div[data-for="'+$(this).val()+'"]').show(),$("input:first",'div[data-for="'+$(this).val()+'"]').focus()}),$("button#connection-test").on("click",function(){var e=t.buildConnectionParams();t.testConnection(e,t.allowConfigSave)}),$("button#config-save").on("click",function(){$(this).attr("disabled","disabled"),$(this).text("...saving...");var e=t.buildConnectionParams();t.saveConnectionParams(e,t.redirect,{url:"someurl",p1:"this",p2:"that"})}),this.buildConnectionParams=function(){var t={};$(this).attr("disabled","disabled"),$(this).text("...testing..."),$('.auth-type-container[data-for="'+$("#git-source-auth").val()+'"]').find("input").map(function(){t[this.name]=this.value});var e={"git-source-select":$("#git-source-select").val(),"git-api-url":$("#git-api-url").val(),"git-credentials":t};return"none"!=$("#git-source-auth").val()&&(e["git-source-auth"]=$("#git-source-auth").val()),e},this.allowConfigSave=function(e){console.log(e);var i=!1;e.success&&""==e.warnings?(t.showNotice("Connection Test","Connected test succeeded","success"),i=!0):e.warnings?(t.showNotice("Connection Test","Connected test succeeded: "+e.warnings,e.severity),i=!0):e.msgs?t.showNotice("Connection Error",e.msgs.join("<br />"),e.severity):t.showNotice("Connection Error","Unknown response","error"),i&&($("button#config-save").removeClass("hidden"),$("button#config-save").focus()),$("button#connection-test").removeAttr("disabled"),$("button#connection-test").text("Test Connection")},this.redirect=function(t){var e=t.url;for(var i in delete t.url,t)e+=i+"="+t[i]+"&";e=e.substr(0,-1),location.href=e},{allowConfigSave:this.allowConfigSave,redirect:this.redirect}},t}((App=function(t){"use strict";return t.notifier=function(){return this.notifierConfig={animation:!0,delay:{show:250,hide:500},html:!0},$("#notifier").css({left:$(".card:first").offset().left+"px",right:$(".card:first").offset().left+"px",maxWidth:$(".card:first").css("width")}),$("#notifier").on("click",t.notifier.hide),this.showNotice=function(e,i,n){$("#notifier").find(".alert-title").text(e),$("#notifier").find(".alert-body").text(i),"success"==n?($("#notifier").removeClass("bg-warning"),$("#notifier").removeClass("bg-danger"),$("#notifier").addClass("bg-success")):"error"==n?($("#notifier").removeClass("bg-warning"),$("#notifier").addClass("bg-danger"),$("#notifier").removeClass("bg-success")):($("#notifier").addClass("bg-warning"),$("#notifier").removeClass("bg-danger"),$("#notifier").removeClass("bg-success")),t.notifier.show()},$(".unseen-notification").each(function(){t.showNotice($(this).attr("data-title"),$(this).text(),$(this).attr("data-status")),$(this).remove()}),this},t.notifier.show=function(){return t.notifierConfig.animation?$("#notifier").animate({opacity:1,top:"66px"}):$("#notifier").show(),this},t.notifier.hide=function(){return t.notifierConfig.animation?$("#notifier").animate({opacity:0,top:0}):$("#notifier").hide(),this},t}((App=function(t){"use strict";return $(document).ajaxStart(function(){t.showLoader()}),$(document).ajaxStop(function(){t.hideLoader()}),$(document).ajaxError(function(e,i,n,o){t.showNotice("Event Error",o,"error"),t.hideLoader()}),t.connector=function(){return this.showLoader=function(){console.log("showing loader"),$("#loader").show()},this.hideLoader=function(){console.log("hiding loader"),$("#loader").hide()},this.testConnection=function(t,e){$.ajax({data:t,method:"post",url:"/test-connection",complete:function(t){var i=JSON.parse(t.responseText);e(i)}})},this.saveConnectionParams=function(t,e,i){$.ajax({data:t,method:"post",url:"/save-connection-params",complete:function(t){void 0===i&&(i=JSON.parse(t.responseText)),e(i)}})},this.hideLoader(),this},t}(App||{}))||{}))||{});